<% upvote_btn_class = @album.upvoted_by?(current_user) ? 'btn-success' : 'btn-default' %>
<% downvote_btn_class = @album.downvoted_by?(current_user) ? 'btn-success' : 'btn-default' %>
<% fav_btn_class = @album.favorited_by?(current_user) ? 'btn-success' : 'btn-default' %>
<%# commentModalId = 'comment-modal-' + (typeof(comment) === undefined) ? 'null' : comment.id %>
<%# JST["albums/_comment_modal"]({ comment: undefined, commentModalId: commentModalId }) %>

<div class="container">
  <div class="row">
    <div class="col-lg-8">

      <h1><%= @album.title %></h1>
      <h4><%= @album.description %></h4>

      <p>created by:
        <% if @album.creator_id.present? %>
          <%= link_to @album.creator.username, @album.creator %>
        <% else %>
          anonymous
        <% end %>
        | points: <%= @album.points %>
        <%  if current_user && @album.creator_id == current_user.id %>
          | <%= link_to "edit this album", edit_album_path(@album) %>
        <% end %>
      </p>

      <%= button_to upvote_album_path(@album),
        method: :get,
        class: "upvote btn #{upvote_btn_class}" do
      %>
        <span class="glyphicon glyphicon-circle-arrow-up"></span>
      <% end %>

      <%= button_to downvote_album_path(@album),
        method: :get,
        class: "downvote btn #{downvote_btn_class}" do
      %>
        <span class="glyphicon glyphicon-circle-arrow-down"></span>
      <% end %>

      <%= button_to favorite_album_path(@album),
        method: :get,
        class: "favorite btn #{fav_btn_class}" do
      %>
        <span class="glyphicon glyphicon-heart"></span>
      <% end %>

      <hr>

      <% @album.images.each do |image| %>
        <h3><%= image.title %></h3>

          <div class="center">
            <%= link_to image do %>
              <img class="img-thumbnail" src="<%= image.file.url(:medium) %>">
            <% end %>
          </div>
        <p><%= image.description %></p>
      <% end %>

      <hr>

    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <button
        type="button"
        class="btn btn-default"
        data-toggle="modal"
        data-target="#<%# commentModalId %>">add a comment</button>

      <h2>comments:</h2>
      <% if @album.comments.present? %>

        <%# JST['albums/_comments']({
              album: album,
              comments: album.getCommentsByParentId()[null]
            }) %>

      <% else %>
        <h4>no comments yet :(</h4><br>
      <% end %>
    </div>
  </div>
</div>
